<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certifica√ß√£o Claro HFC - PROCISA</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --claro-red: #e31a1c; --procisa-blue: #000080; --bg: #f4f7f6; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); display: flex; justify-content: center; padding: 10px; margin: 0; }
        .card { width: 100%; max-width: 650px; background: #fff; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; border-top: 8px solid var(--procisa-blue); margin-top: 20px; }
        .logo-procisa { width: 280px; margin-bottom: 15px; height: auto; }
        .btn { display: block; width: 100%; padding: 15px; margin: 10px 0; border: 2px solid #ddd; border-radius: 10px; cursor: pointer; background: #fff; font-size: 15px; font-weight: 500; text-align: left; padding-left: 20px; transition: 0.2s; line-height: 1.4; }
        .btn:hover { background: #f9f9f9; border-color: var(--procisa-blue); }
        .correct { background: #28a745 !important; color: white !important; border-color: #28a745 !important; }
        .wrong { background: #ff69b4 !important; color: white !important; border-color: #ff69b4 !important; }
        .timer-bar { height: 8px; background: #eee; border-radius: 4px; margin: 15px 0; overflow: hidden; }
        .timer-fill { height: 100%; background: var(--claro-red); width: 100%; transition: 1s linear; }
        .explanation-box { background: #fff9c4; padding: 15px; border-radius: 8px; margin-top: 15px; font-size: 14px; color: #444; border-left: 5px solid #fbc02d; text-align: left; line-height: 1.4; font-weight: bold; }
        .hidden { display: none !important; }
        #ranking-list { list-style: none; padding: 0; text-align: left; }
        #ranking-list li { padding: 12px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; background: #fdfdfd; }
        h2 { color: var(--procisa-blue); margin-top: 5px; font-size: 22px; }
        input[type="text"] { width: 85%; padding: 12px; margin-bottom: 20px; border-radius: 8px; border: 1px solid #ccc; font-size: 16px; }
    </style>
</head>
<body>

    <div id="setup" class="card">
        <img src="logo-procisa.png" class="logo-procisa" alt="Treinamento PROCISA">
        <h2>Preparat√≥rio para Certifica√ß√£o Claro HFC</h2>
        <p style="color: #666; margin-bottom: 25px;">Avalia√ß√£o Final - Selecione a Alternativa Correta</p>
        <input type="text" id="p-name" placeholder="Digite seu Nome Completo">
        <button class="btn" style="background: var(--claro-red); color: #fff; border: none; text-align: center; font-size: 18px;" onclick="window.init()">INICIAR AVALIA√á√ÉO</button>
    </div>

    <div id="quiz" class="card hidden">
        <div id="q-info" style="font-weight: bold; color: #888;"></div>
        <div class="timer-bar"><div id="t-fill" class="timer-fill"></div></div>
        <h3 id="q-text" style="color: #333; text-align: left; line-height: 1.5; margin-bottom: 25px;"></h3>
        <div id="opts"></div>
        <div id="explanation" class="explanation-box hidden"></div>
    </div>

    <div id="result" class="card hidden">
        <img src="logo-procisa.png" style="width: 150px;">
        <h2 id="final-msg"></h2>
        <hr>
        <h4>üèÜ RANKING DOS T√âCNICOS</h4>
        <ul id="ranking-list"></ul>
        <button class="btn" style="text-align: center;" onclick="location.reload()">REFAZER AVALIA√á√ÉO</button>
        <button onclick="window.resetRanking()" style="font-size: 10px; color: #ccc; background: none; border: none; margin-top: 50px; cursor: pointer;">Limpar Ranking</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { getFirestore, doc, setDoc, collection, query, orderBy, limit, onSnapshot, deleteDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBq8wjHbbLGh5mlhujzX2b_-FJX4e2AYzk",
            authDomain: "quiz-telecom-claro.firebaseapp.com",
            projectId: "quiz-telecom-claro",
            storageBucket: "quiz-telecom-claro.firebasestorage.app",
            messagingSenderId: "64474953672",
            appId: "1:64474953672:web:58520fea1375adf49532fd"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // BANCO DE DADOS INTEGRAL DAS QUEST√ïES REVISADAS
        const QUESTIONS = [
            {q: "Nos casos onde os n√≠veis de sinal n√£o forem suficientes para atender todos os pontos, √© essencial:", o: ["Conferir se n√£o existe problemas com os n√≠veis da Rede Externa e MDU.", "Instruir o cliente para que ele saiba de poss√≠veis problemas em alguns pontos.", "Relatar os n√≠veis inadequados em Ordem de Servi√ßo sem orientar o cliente.", "Realizar a instala√ß√£o e informar ao Cliente que ele pode ligar na CRN caso tenha problemas."], c: 0, t: 30},
            {q: "Qual o procedimento correto para o t√©cnico finalizar o preenchimento da O.S. DIGITAL? ( Quest√£o Antiga! )", o: ["O t√©cnico deve finalizar o processo de preenchimento da O.S. DIGITAL clicando no bot√£o ‚Äúadotar e assinar‚Äù", "O t√©cnico deve finalizar o processo de preenchimento da O.S. DIGITAL clicando no bot√£o ‚Äúconcluir‚Äù", "O t√©cnico deve finalizar o processo de preenchimento da O.S. DIGITAL clicando no bot√£o ‚Äúavan√ßar‚Äù", "O t√©cnico deve finalizar o processo de preenchimento da O.S. DIGITAL clicando no bot√£o ‚Äúassinar ordem de servi√ßo‚Äù"], c: 0, t: 25},
            {q: "Com o gravador na Nuvem, os conte√∫dos gravados ficar√£o dispon√≠veis pelo per√≠odo de:", o: ["90 dias contados a partir da data de grava√ß√£o", "180 dias contados a partir da data de grava√ß√£o.", "45 dias contados a partir da data de grava√ß√£o.", "30 dias contados a partir da data de grava√ß√£o."], c: 3, t: 20},
            {q: "Conforme procedimento de Baixa na URA, para o MAC 0023754F1608, √© necess√°rio digitar para o caractere hexadecimal (F):", o: ["*6", "*06", "6", "#6"], c: 1, t: 20},
            {q: "Sobre o teste de TRACERT, √© correto afirmar que:", o: ["√â um comando para configurar, habilitar ou desabilitar o Firewall da m√°quina", "√â um teste de rota que visualiza a solicita√ß√£o de acesso a uma determinada p√°gina ou servidor com o objetivo de verificar lentid√£o, bloqueio ou gargalo ao site solicitado", "√â um teste para determinar se a velocidade da navega√ß√£o do cliente est√° dentro ou fora da velocidade contratada.", "√â um teste para verificar a exist√™ncia de v√≠rus ou Cavalo de Tr√≥ia no computador do cliente."], c: 1, t: 40},
            {q: "Dentre as op√ß√µes abaixo, qual representa baixo potencial de barreira/interfer√™ncia para o sinal de Wi-Fi?", o: ["Madeira e Gesso", "√Ågua e √Årvores", "Concreto e Metal", "Micro-ondas e Telefone sem fio."], c: 0, t: 25},
            {q: "Dos padr√µes de redes Wi-Fi abaixo, qual nos proporciona a maior velocidade da taxa de transmiss√£o?", o: ["n", "b", "g", "ac"], c: 3, t: 20},
            {q: "Qual site devemos acessar para verificar a velocidade de conex√£o do CLARO V√≠rtua?", o: ["www.brasilbandalarga.com.br", "www.minhaconexao.com.br", "www.rjnet.com.br", "www.testesuavelocidade.com.br"], c: 0, t: 20},
            {q: "Sobre o #NET WIFI, podemos afirmar: (1) Rede de Spots instalada pelas ruas; (2) Rede exibida nos EMTA‚Äôs 3.0 compat√≠veis.", o: ["As afirma√ß√µes 1 e 2 est√£o corretas", "Apenas a afirma√ß√£o 1 est√° correta", "Apenas a afirma√ß√£o 2 est√° correta", "As afirma√ß√µes n√£o s√£o corretas."], c: 0, t: 30},
            {q: "O que √© PIP:", o: ["O PIP √© um recurso que possibilita visualizar outro canal atrav√©s de uma pequena janela, ao mesmo tempo que assiste a um programa na tela principal.", "O PIP possibilita a transfer√™ncia de dados e arquivos entre os clientes NET V√≠rtua.", "O PIP possibilita a visualiza√ß√£o das imagens armazenadas na rede do cliente em seu telefone.", "O PIP possibilita o pagamento da fatura da Claro atrav√©s do controle remoto."], c: 0, t: 35},
            {q: "Dos padr√µes de criptografia WiFi listados abaixo, qual √© considerado o mais seguro?", o: ["RADIUS PSK", "WEP", "WPA + TKIP", "WPA2 + AES"], c: 3, t: 20},
            {q: "O que √© AutoHit?", o: ["Funcionalidade que permite o envio autom√°tico de HIT pelo controle remoto em equipamentos HD e HDMAX", "Funcionalidade que permite o envio autom√°tico de HIT pelo controle remoto em equipamentos SD, HD e HDMAX", "Funcionalidade que permite o reset do decodificador e suas configura√ß√µes", "Todas as alternativas est√£o corretas."], c: 0, t: 30},
            {q: "Sobre a configura√ß√£o dos servi√ßos inteligentes do ClaroFone, qual das informa√ß√µes abaixo est√° correta?", o: ["O SIGA-ME n√£o est√° dispon√≠vel para pacotes com Busca Autom√°tica.", "O SIGA-ME s√≥ pode ser habilitado ap√≥s o pagamento da 1¬∫ fatura", "Ao configurar o SIGA-ME, desative o servi√ßo de CHAMADA EM ESPERA.", "Todas as op√ß√µes est√£o corretas."], c: 3, t: 35},
            {q: "Qual o procedimento correto para realizar a valida√ß√£o de retorno?", o: ["Canal 262 + 8291 + Preenchimento do n√∫mero da O.S. e Contrato", "Canal 262 + Menu + 8291 + Preenchimento do n√∫mero da O.S. e Contrato", "Canal 262 + Menu + Tecla Azul + 8291 + Preenchimento do n√∫mero da O.S. e Contrato", "Canal 262 + Tecla Azul + 8291 + Preenchimento da n√∫mero da O.S. e Contrato"], c: 3, t: 35},
            {q: "IPCONFIG /RENEW √© o comando correto para for√ßar a renova√ß√£o de um IPV4 ou IPV6?", o: ["N√£o √© poss√≠vel for√ßar a renova√ß√£o do IP", "N√£o, o comando que utilizamos para renova√ß√£o do IP √© CHKDSK", "Sim, o comando que utilizamos para renova√ß√£o do IP √© IPCONFIG /RENEW", "N√£o, o comando correto √© IPCONFIG /RELEASE"], c: 2, t: 25},
            {q: "Para verifica√ß√£o dos endere√ß√°veis ( CA ID e SmartCard ) para realizar a baixa, usamos qual canal?", o: ["250", "252", "270", "272"], c: 2, t: 20},
            {q: "Para considerarmos um Decoder HD/HDMAX ON-line, qual op√ß√£o abaixo √© a correta?", o: ["Nas configura√ß√µes verificar se o IP inicia em: 10.xxx.xxx.xxx", "Nas configura√ß√µes verificar se o IP inicia em: 168.xxx.xxx.xxx", "Nas configura√ß√µes verificar se o IP inicia em: 189.xxx.xxx.xxx", "Nas configura√ß√µes verificar se o IP inicia em: 192.xxx.xxx.xxx"], c: 0, t: 30},
            {q: "Dentre as alternativas abaixo, qual delas apresenta uma melhor qualidade de sinal digital?", o: ["BER 1.0 E-05", "BER 1.0 E-07", "BER 2.0 E-08", "BER 9 E-06"], c: 2, t: 30},
            {q: "Ao t√©rmino de uma instala√ß√£o, se o servi√ßo de grava√ß√£o n√£o funciona, o que fazer?", o: ["Confere o UPDATE ID", "Conferir se o servi√ßo est√° ativo em seu contrato", "Enviar HIT para o Decoder", "Todas as alternativas est√£o corretas"], c: 3, t: 30},
            {q: "Se o teste de download apresenta uma taxa de transfer√™ncia de 7,5MBps, qual a velocidade contratada?", o: ["100 Mbps", "12 Mbps", "120 Mbps", "60 Mbps"], c: 3, t: 35},
            {q: "Quais s√£o os servi√ßos inteligentes do CLARO FONE?", o: ["Bina, Conferencia a 3, Chamada em Espera, Siga-me e Bloqueio", "Confer√™ncia, PME, Portabilidade, Identificador de Chamada e Espera", "4 Extens√µes, Mesh, Bina e Identificador de Chamada", "Consultanumero.ABRTelecom, Bloqueio e Bina"], c: 0, t: 35},
            {q: "Quais os movimentos que o sinal faz ao entrar no DC de 6?", o: ["Inser√ß√£o / Deriva√ß√£o / Isola√ß√£o", "Deriva√ß√£o / Isola√ß√£o / Inser√ß√£o", "Inser√ß√£o / Inser√ß√£o / Deriva√ß√£o", "Isola√ß√£o / Isola√ß√£o / Deriva√ß√£o"], c: 0, t: 30},
            {q: "Um IP Nateado (CGNAT) come√ßa com qual n√∫mero?", o: ["102.168.2.34", "100.981.5.23", "255.255.255.0", "192.168.0.1"], c: 1, t: 20},
            {q: "Sobre o NOW / CLARO TV+, assinale a alternativa correta:", o: ["Aluguel por TV ou computador", "Cadastro de at√© 5 dispositivos m√≥veis", "Play simult√¢neo em m√≥vel e computador", "Todas as alternativas est√£o corretas."], c: 3, t: 30},
            {q: "Ao iniciar uma instala√ß√£o e identificar que n√£o h√° disponibilidade de HP no tap, o que deve ser feito?", o: ["Inserir um divisor na rede normalmente", "N√£o realizar a instala√ß√£o, baixar com c√≥digo #205 e abrir ocorr√™ncia PE1", "Baixar com #203 para encaminhar rede externa", "Inserir divisor na rede externa e baixar com #409"], c: 1, t: 35},
            {q: "Para verificar se o sinal de wifi √© suficiente (Analyzer), os n√≠veis devem ser:", o: ["De -10 a -70 dBm", "Entre 40dbmv a 52dbmv", "Entre -12 e +12 dbmv", "Usar um canal livre deixa o sinal fraco"], c: 0, t: 25},
            {q: "Qual a inclina√ß√£o correta da furadeira para furos expostos ao tempo?", o: ["Furar de dentro para fora, inclinando 15¬∞ para baixo", "Furar de dentro para fora, inclinando 15¬∞ para cima", "Furar de dentro para fora em √¢ngulo reto", "Furar de fora para dentro, inclinando 15¬∞ para baixo"], c: 0, t: 25},
            {q: "O que √© downstream?", o: ["Sinal que o CMTS envia para o Emta.", "Sinal que o Emta envia para o cmts.", "Sinal que o medido envia para o EMTA.", "Sinal que o Emta envia para o medidor."], c: 0, t: 20},
            {q: "Refer√™ncia Entrada 15 dbmv (CA) e 12 dbmv (CB). Quais n√≠veis na sa√≠da TAP do DC 06?", o: ["CA: 12,5 dBmV, CB 9,5 dBmV", "CA: 13,5 dBmV, CB: 10,5 dBmV", "CA: 15 dBmV, CB: 12 dBmV", "CA: 09 dBmV, CB: 06 dBmV"], c: 3, t: 40},
            {q: "Refer√™ncia 19 dBmV em 550 MHz. Ao passar por um DC 12 DB, quais valores nas Sa√≠das OUT e TAP?", o: ["16 dbmv e 7 dbmv", "17 dbmv e 8 dbmv", "18 dbmv e 7 dbmv", "19 dbmv e 8 dbmv"], c: 2, t: 40},
            {q: "O que voc√™ entende por DOCSIS?", o: ["Padr√£o utilizado para interface de transmiss√£o de dados via cabo", "Padr√£o utilizado para interface de recep√ß√£o de imagem via cabo", "Tecnologia para velocidade a partir de 50 mega", "Tecnologia utilizada em todos os decodificadores HD"], c: 0, t: 25},
            {q: "O que acontece com o sinal se o cabo for amassado na instala√ß√£o?", o: ["Aumento na blindagem contra interfer√™ncia", "Altera√ß√£o na imped√¢ncia caracter√≠stica do cabo", "Invers√£o do tilt entre canal alto e baixo", "Satura as frequ√™ncias mais altas"], c: 1, t: 25},
            {q: "Informa√ß√µes que n√£o podem faltar em um atendimento de excel√™ncia?", o: ["Telefone da central e do coordenador", "Utiliza√ß√£o do NOW, instru√ß√£o do controle remoto e aplicativo MINHA CLARO RESIDENCIAL.", "Informar seu telefone pessoal para o cliente", "Nenhuma alternativa anterior"], c: 1, t: 30},
            {q: "Qual o melhor local para instala√ß√£o do Emta visando cobertura Wi-Fi?", o: ["Na cozinha (lugar com mais pessoas)", "No ponto mais alto da resid√™ncia (s√≥t√£o)", "Sinal entre -70 dBm e -90 dBm", "C√¥modo central para atingir 80% da casa entre -10 a -70dbm"], c: 3, t: 35},
            {q: "O que √© PIP e em quais decodificadores est√° dispon√≠vel?", o: ["Recurso para visualizar outro canal em janela pequena (HDNG e 4K)", "Recurso para visualizar outro canal em janela pequena (Todos os HD)", "Recurso para visualizar n√≠veis de sinal no canal 270", "Som emitido quando o sinal est√° fora do padr√£o"], c: 0, t: 30},
            {q: "Qual rede √© adequada para uma TV 4K Ultra HD via Wi-Fi?", o: ["Rede 2.4 GHz (sofre menos interfer√™ncia / banda menor)", "Rede 2.4 GHz (sofre mais interfer√™ncia / banda maior)", "Rede 5 GHZ (sofre mais interfer√™ncia / banda maior)", "Rede 5 GHZ (sofre menos interfer√™ncia / banda maior)"], c: 3, t: 30},
            {q: "O que √© REPLAY TV nos pacotes TOP HD / HD MAX e Claro tv+?", o: ["Funcionalidade para gravar t√≠tulos do NOW", "Funcionalidade para assistir novamente toda a programa√ß√£o", "Funcionalidade para assistir replay de gols", "Recome√ßar evento atual do in√≠cio ou acessar conte√∫dos de at√© 7 dias"], c: 3, t: 35},
            {q: "Sobre a fun√ß√£o AUTODESLIGAR nos HDNGs, qual o procedimento?", o: ["Desabilitar para evitar novas visitas por desligamentos", "N√£o deve ser desabilitada para manter o decodificador atualizado", "J√° vem desabilitada de f√°brica", "J√° vem habilitada de f√°brica"], c: 1, t: 30},
            {q: "Qual alternativa abaixo representa a melhor qualidade do sinal digital (Diagn√≥stico)?", o: ["PS 100%, QS 100% e BER -5", "PS 60%, QS 100% e BER -8", "PS 90%, QS 70% e BER -7", "PS 95%, QS 70% e BER -6"], c: 1, t: 30},
            {q: "Quais recursos teremos em um decoder com Update ID 1?", o: ["Alta defini√ß√£o, Servi√ßo de Grava√ß√£o e NOW", "Alta defini√ß√£o e Now (VOD)", "Alta defini√ß√£o e servi√ßo de grava√ß√£o", "Somente alta defini√ß√£o"], c: 1, t: 25},
            {q: "Para evitar lentid√£o por congestionamento de canais Wi-Fi, devemos:", o: ["Configurar sempre o canal 11", "Garantir n√≠veis entre -40 √† -70 dBm no Analyzer", "Instalar em c√¥modo central", "Deixar canal em autom√°tico e orientar boot no Emta"], c: 3, t: 35},
            {q: "O que √© BER?", o: ["Taxa de erro de transmiss√£o", "Taxa de erro de recep√ß√£o", "Taxa de erro de modula√ß√£o", "Taxa de erro de bit"], c: 3, t: 20}
        ];

        let cur = 0, score = 0, timer, timeLeft, pName = "";

        window.init = () => {
            pName = document.getElementById('p-name').value;
            if(!pName) return alert("Por favor, digite seu nome completo!");
            document.getElementById('setup').classList.add('hidden');
            document.getElementById('quiz').classList.remove('hidden');
            loadQ();
        };

        function loadQ() {
            if(cur >= QUESTIONS.length) return finish();
            const q = QUESTIONS[cur];
            timeLeft = q.t;
            document.getElementById('q-info').innerText = `Quest√£o ${cur+1} de ${QUESTIONS.length}`;
            document.getElementById('q-text').innerText = q.q;
            document.getElementById('explanation').classList.add('hidden');
            const box = document.getElementById('opts');
            box.innerHTML = "";
            q.o.forEach((opt, i) => {
                const b = document.createElement('button');
                b.className = "btn";
                b.innerText = opt;
                b.onclick = () => select(i, b);
                box.appendChild(b);
            });
            runTimer();
        }

        function runTimer() {
            const f = document.getElementById('t-fill');
            f.style.width = "100%";
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                f.style.width = (timeLeft/QUESTIONS[cur].t*100) + "%";
                if(timeLeft <= 0) select(-1, null);
            }, 1000);
        }

        function select(idx, clickedBtn) {
            clearInterval(timer);
            const correctIdx = QUESTIONS[cur].c;
            const btns = document.querySelectorAll('.btn');
            btns.forEach(b => b.style.pointerEvents = "none");

            if(idx === correctIdx) {
                if(clickedBtn) clickedBtn.classList.add('correct');
                score += (100 + (timeLeft * 10));
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            } else {
                if(clickedBtn) clickedBtn.classList.add('wrong');
                btns[correctIdx].classList.add('correct');
            }

            const expBox = document.getElementById('explanation');
            expBox.innerText = `üí° FEEDBACK: Resposta correta validada conforme manual PROCISA/CLARO.`;
            expBox.classList.remove('hidden');

            cur++;
            setTimeout(loadQ, 3500);
        }

        async function finish() {
            document.getElementById('quiz').classList.add('hidden');
            document.getElementById('result').classList.remove('hidden');
            document.getElementById('final-msg').innerText = `${pName}, sua nota final: ${score} pts!`;
            await setDoc(doc(db, "ranking", pName + "_" + Date.now()), { name: pName, score: score });
        }

        const qRank = query(collection(db, "ranking"), orderBy("score", "desc"), limit(10));
        onSnapshot(qRank, (snap) => {
            const list = document.getElementById('ranking-list');
            list.innerHTML = "";
            snap.forEach((doc) => {
                const d = doc.data();
                list.innerHTML += `<li><span>${d.name}</span> <b>${d.score} pts</b></li>`;
            });
        });

        window.resetRanking = async () => {
            const pass = prompt("Senha:");
            if(pass === "admin123") {
                const querySnapshot = await getDocs(collection(db, "ranking"));
                querySnapshot.forEach(async (d) => { await deleteDoc(doc(db, "ranking", d.id)); });
                alert("Ranking reiniciado!");
            }
        };
    </script>
</body>
</html>
