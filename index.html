<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certifica√ß√£o Claro HFC - PROCISA</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { 
            --claro-red: #e31a1c; --procisa-blue: #000080; --bg: #f8f9fa; 
            --gold: #f5c518; --silver: #c0c0c0; --bronze: #cd7f32;
        }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 15px; }
        
        .card { 
            width: 100%; max-width: 650px; background: white; padding: 35px; border-radius: 20px; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.1); text-align: center; border-top: 8px solid var(--procisa-blue);
        }

        .logo-procisa { width: 280px; margin-bottom: 15px; }
        
        /* Bot√µes com Design Premium */
        .btn { 
            display: block; width: 100%; padding: 16px; margin: 10px 0; border: 2px solid #eee; border-radius: 12px; 
            cursor: pointer; background: #fff; color: #333; font-size: 15.5px; font-weight: 500; text-align: left; 
            padding-left: 20px; transition: 0.2s; line-height: 1.4;
        }
        .btn:hover { border-color: var(--procisa-blue); background: #f8faff; transform: translateY(-2px); }
        
        .correct { background: #28a745 !important; color: white !important; border-color: #218838 !important; }
        .wrong { background: #ff6b6b !important; color: white !important; border-color: #ee5253 !important; }

        /* Progress Bar e Timer */
        .progress-container { width: 100%; background: #eee; height: 8px; border-radius: 4px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--procisa-blue); width: 0%; transition: width 0.5s ease; }
        .timer-bar { height: 6px; background: #eee; border-radius: 3px; margin: 15px 0; overflow: hidden; }
        .timer-fill { height: 100%; background: var(--claro-red); width: 100%; transition: 1s linear; }

        .explanation-box { background: #fff9c4; padding: 15px; border-radius: 10px; margin-top: 15px; border-left: 5px solid #fbc02d; text-align: left; font-size: 14px; }
        input[type="text"] { width: 85%; padding: 15px; border: 2px solid #ddd; border-radius: 12px; font-size: 17px; margin-bottom: 20px; text-align: center; }
        
        #ranking-list { list-style: none; padding: 0; margin-top: 15px; text-align: left; }
        #ranking-list li { padding: 12px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
        .rank-highlight { background: #fffdf0; border: 1px solid var(--gold); border-radius: 8px; font-weight: bold; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="setup" class="card">
        <img src="logo-procisa.png" class="logo-procisa" alt="PROCISA">
        <h2>Preparat√≥rio para Certifica√ß√£o Claro HFC</h2>
        <p style="color: #666;">Avalia√ß√£o Final - Respostas Embaralhadas</p>
        <input type="text" id="p-name" placeholder="Digite seu Nome Completo">
        <button id="btn-iniciar" class="btn" style="background: var(--claro-red); color: white; text-align: center; border: none; font-weight: bold; font-size: 18px;">INICIAR EXAME PRO</button>
    </div>

    <div id="quiz" class="card hidden">
        <div class="progress-container"><div id="p-fill" class="progress-fill"></div></div>
        <div id="q-info" style="font-weight: bold; color: #888; font-size: 12px; text-transform: uppercase;"></div>
        <div class="timer-bar"><div id="t-fill" class="timer-fill"></div></div>
        <h3 id="q-text" style="text-align: left; color: #333; line-height: 1.5; margin-bottom: 20px;"></h3>
        <div id="opts"></div>
        <div id="explanation" class="explanation-box hidden"></div>
    </div>

    <div id="result" class="card hidden">
        <h2 style="color: var(--procisa-blue);">Obrigado por realizar o teste!</h2>
        <p>Sua avalia√ß√£o foi conclu√≠da com sucesso.</p>
        <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin: 20px 0; border: 1px solid #eee;">
            <h1 id="final-score" style="margin: 0; color: var(--claro-red); font-size: 3rem;">0</h1>
            <p style="margin: 5px 0; font-weight: bold; color: #555;">PONTOS TOTAIS</p>
            <div id="pos-highlight" style="font-size: 1.3rem; color: var(--procisa-blue); margin-top: 15px; border-top: 1px solid #ddd; padding-top: 15px; font-weight: bold;">
                Posi√ß√£o no Ranking: <span id="user-rank">--</span>
            </div>
        </div>
        <button class="btn" style="background: var(--procisa-blue); color: white; text-align: center; border: none; font-size: 17px;" onclick="location.reload()">REFAZER PARA MELHORAR MEU RESULTADO üöÄ</button>
        <hr style="margin: 25px 0; opacity: 0.3;">
        <h4 style="text-align: left; color: #444;">üèÜ TOP 10 RANKING</h4>
        <ul id="ranking-list"></ul>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { getFirestore, doc, setDoc, collection, query, orderBy, limit, onSnapshot, getDocs } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBq8wjHbbLGh5mlhujzX2b_-FJX4e2AYzk",
            authDomain: "quiz-telecom-claro.firebaseapp.com",
            projectId: "quiz-telecom-claro",
            storageBucket: "quiz-telecom-claro.firebasestorage.app",
            messagingSenderId: "64474953672",
            appId: "1:64474953672:web:58520fea1375adf49532fd"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // TODAS AS 42 QUEST√ïES INTEGRAIS DO DOCUMENTO
        const QUESTIONS = [
            {q: "Nos casos onde os n√≠veis de sinal n√£o forem suficientes para atender todos os pontos, √© essencial:", o: ["Conferir se n√£o existe problemas com os n√≠veis da Rede Externa e MDU.", "Instruir o cliente para que ele saiba de poss√≠veis problemas em alguns pontos.", "Relatar os n√≠veis inadequados em OS sem orientar o cliente.", "Realizar a instala√ß√£o e informar que ele ligue na CRN."], c: 0, t: 30, e: "Sempre valide a rede externa antes de prosseguir. [cite: 4, 5]"},
            {q: "Qual o procedimento correto para o t√©cnico finalizar o preenchimento da O.S. DIGITAL?", o: ["O t√©cnico deve finalizar o processo clicando no bot√£o 'adotar e assinar'", "O t√©cnico deve finalizar clicando no bot√£o 'concluir'", "O t√©cnico deve finalizar clicando no bot√£o 'avan√ßar'", "O t√©cnico deve finalizar clicando no bot√£o 'assinar ordem de servi√ßo'"], c: 0, t: 30, e: "O encerramento oficial √© via 'adotar e assinar'. [cite: 9, 10]"},
            {q: "Com o gravador na Nuvem, os conte√∫dos gravados ficar√£o dispon√≠veis pelo per√≠odo de:", o: ["90 dias", "180 dias", "45 dias", "30 dias"], c: 3, t: 25, e: "O per√≠odo de reten√ß√£o na nuvem √© de 30 dias. [cite: 14, 18]"},
            {q: "Na Baixa URA, para o MAC 0023754F1608, √© necess√°rio digitar para o caractere hexadecimal (F):", o: ["*6", "*06", "6", "#6"], c: 1, t: 25, e: "O c√≥digo *06 substitui a letra F na URA. [cite: 19, 21]"},
            {q: "Sobre o teste de TRACERT, √© correto afirmar que:", o: ["Configura o Firewall", "√â um teste de rota para verificar lentid√£o, bloqueio ou gargalo ao site solicitado", "Mede velocidade de navega√ß√£o", "Verifica v√≠rus"], c: 1, t: 35, e: "O tracert rastreia o caminho do pacote para achar falhas. [cite: 24, 26]"},
            {q: "Qual representa baixo potencial de barreira/interfer√™ncia para o sinal de Wi-Fi?", o: ["Madeira e Gesso", "√Ågua e √Årvores", "Concreto e Metal", "Micro-ondas e telefone sem fio"], c: 0, t: 25, e: "Madeira e Gesso possuem baixo potencial de barreira. [cite: 29, 30]"},
            {q: "Dos padr√µes Wi-Fi abaixo, qual nos proporciona a maior velocidade da taxa de transmiss√£o?", o: ["n", "b", "g", "ac"], c: 3, t: 25, e: "O padr√£o 802.11ac √© superior em velocidade. [cite: 34, 38]"},
            {q: "Qual site devemos acessar para verificar a velocidade de conex√£o do CLARO V√≠rtua?", o: ["www.brasilbandalarga.com.br", "www.minhaconexao.com.br", "www.rjnet.com.br", "Speedtest"], c: 0, t: 25, e: "Este √© o site homologado pela Anatel para medi√ß√µes. [cite: 39, 40]"},
            {q: "Sobre o #NET WIFI, podemos afirmar que a rede de Spots em ruas e a rede exibida nos EMTA's 3.0:", o: ["As afirma√ß√µes 1 e 2 est√£o corretas", "Apenas a afirma√ß√£o 1 est√° correta", "Apenas a afirma√ß√£o 2 est√° correta", "As afirma√ß√µes n√£o s√£o corretas"], c: 0, t: 30, e: "Ambas as afirma√ß√µes sobre #NET WIFI est√£o corretas. [cite: 44, 47]"},
            {q: "O que √© PIP (Picture in Picture)?", o: ["Visualizar outro canal em janela pequena simultaneamente", "Transfer√™ncia de arquivos entre clientes", "Ver fotos no celular", "Pagar fatura pelo controle"], c: 0, t: 30, e: "Permite acompanhar dois canais ao mesmo tempo. [cite: 51, 52]"},
            {q: "Dos padr√µes de criptografia WiFi listados abaixo, qual √© considerado o mais seguro?", o: ["RADIUS PSK", "WEP", "WPA + TKIP", "WPA2 + AES"], c: 3, t: 25, e: "WPA2+AES √© o padr√£o mais seguro atualmente. [cite: 57, 60]"},
            {q: "O que √© AutoHit?", o: ["Envio autom√°tico de HIT pelo controle em equipamentos HD e HDMAX", "Envio autom√°tico de HIT em equipamentos SD, HD e HDMAX", "Reset do decodificador", "Configura√ß√£o de rede"], c: 0, t: 25, e: "Facilita a ativa√ß√£o diretamente pelo controle HD/HDMAX. [cite: 61, 62]"},
            {q: "Sobre os servi√ßos inteligentes ClaroFone, o SIGA-ME e Busca Autom√°tica:", o: ["S√£o incompat√≠veis e o cliente deve escolher entre um ou outro", "Podem ser usados juntos sempre", "Exigem 1 ano de contrato", "N√£o existem"], c: 0, t: 30, e: "O SIGA-ME n√£o est√° dispon√≠vel com Busca Autom√°tica. [cite: 66, 67]"},
            {q: "Qual o procedimento correto para realizar a valida√ß√£o de retorno?", o: ["Canal 262 + Tecla Azul + 8291 + Preenchimento da OS e Contrato", "Canal 262 + 8291", "Canal 262 + Menu + 8291", "Canal 262 + Tecla Azul + Contrato"], c: 0, t: 35, e: "A valida√ß√£o t√©cnica √© feita via canal 262 + Tecla Azul. [cite: 72, 76]"},
            {q: "Qual o comando utilizado para for√ßar a renova√ß√£o do IP din√¢mico (DHCP)?", o: ["IPCONFIG /RENEW", "CHKDSK", "IPCONFIG /RELEASE", "IPCONFIG /ALL"], c: 0, t: 25, e: "O comando /renew solicita novo endere√ßamento ao servidor. [cite: 77, 81]"},
            {q: "Para verifica√ß√£o dos endere√ß√°veis (CA ID e SmartCard) para realizar a baixa, usamos:", o: ["Canal 270", "Canal 250", "Canal 252", "Canal 272"], c: 0, t: 20, e: "O canal 270 exibe os dados t√©cnicos necess√°rios. [cite: 83, 86]"},
            {q: "Para considerarmos um Decoder HD/HDMAX ON-line, o IP deve iniciar em:", o: ["10.xxx.xxx.xxx", "168.xxx.xxx.xxx", "189.xxx.xxx.xxx", "192.xxx.xxx.xxx"], c: 0, t: 25, e: "A rede de ger√™ncia utiliza IPs da classe 10. [cite: 88, 89]"},
            {q: "Dentre as alternativas abaixo, qual delas apresenta uma melhor qualidade de sinal?", o: ["BER 2.0 E-08", "BER 1.0 E-05", "BER 1.0 E-07", "BER 9 E-06"], c: 0, t: 30, e: "Menor BER significa sinal mais limpo. E-08 √© excelente. [cite: 93, 96]"},
            {q: "Se o servi√ßo de grava√ß√£o n√£o funciona ao t√©rmino da instala√ß√£o, deve-se:", o: ["Todas as alternativas (Update ID, Contrato, HIT)", "Apenas enviar HIT", "Apenas trocar o decoder", "Apenas conferir contrato"], c: 0, t: 30, e: "Deve-se validar Update ID, contrato e enviar HIT. [cite: 98, 102]"},
            {q: "Taxa de download de 7,5MBps equivale a qual velocidade contratada?", o: ["60 Mbps", "100 Mbps", "12 Mbps", "120 Mbps"], c: 0, t: 35, e: "7,5MBps * 8 bits = 60 Mbps. [cite: 103, 107]"},
            {q: "Quais os servi√ßos inteligentes do CLARO FONE?", o: ["Bina, Conferencia a 3, Chamada em Espera, Siga-me e Bloqueio", "Bina e Wi-Fi", "Apenas Bina", "Bloqueio e NOW"], c: 0, t: 35, e: "Inclui Bina, Confer√™ncia, Espera, Siga-me e Bloqueio. [cite: 108, 109]"},
            {q: "Quais os movimentos que o sinal faz ao entrar no DC de 6?", o: ["Inser√ß√£o / Deriva√ß√£o / Isola√ß√£o", "Apenas Isola√ß√£o", "Deriva√ß√£o / Isola√ß√£o", "Apenas Inser√ß√£o"], c: 0, t: 30, e: "O sinal sofre perda por inser√ß√£o, deriva√ß√£o e isola√ß√£o. [cite: 113, 114]"},
            {q: "Um IP Nateado come√ßa com qual n√∫mero?", o: ["100.981.5.23", "102.168.2.34", "255.255.255.0", "192.168.0.1"], c: 0, t: 20, e: "O IP nateado (CGNAT) inicia na faixa 100. [cite: 118, 120]"},
            {q: "Sobre o NOW / CLARO TV+, √© correto afirmar:", o: ["Todas as alternativas (Aluguel, Dispositivos, Play simult√¢neo)", "Apenas aluguel pela TV", "Apenas 1 dispositivo", "N√£o tem play simult√¢neo"], c: 0, t: 30, e: "Suporta aluguel multi-tela e v√°rios dispositivos. [cite: 123, 127]"},
            {q: "Dos padr√µes de criptografia wi-fi, qual √© o mais seguro?", o: ["WPA2", "WEP", "WAP", "WPA"], c: 0, t: 20, e: "WPA2 √© o padr√£o de seguran√ßa mais robusto. [cite: 128, 132]"},
            {q: "N√£o h√° disponibilidade de HP no tap. O que devo fazer?", o: ["Baixa com c√≥digo #205 e abrir ocorr√™ncia PE1", "Inserir divisor na rede", "Baixa com #203", "Baixa com #409"], c: 0, t: 35, e: "N√£o se deve piratear porta; deve-se abrir PE1. [cite: 133, 136]"},
            {q: "A intensidade de conex√£o ideal medida no Wi-Fi Analyzer deve ser:", o: ["-10 a -70 dBm", "40 a 52 dbmv", "-12 a +12 dbmv", "Sempre zero"], c: 0, t: 25, e: "Este intervalo garante estabilidade. [cite: 139, 140]"},
            {q: "Qual a inclina√ß√£o correta da furadeira para furos expostos ao tempo?", o: ["De dentro para fora, inclinando 15¬∞ para baixo", "De dentro para fora, 15¬∞ para cima", "√Çngulo reto", "De fora para dentro"], c: 0, t: 25, e: "A inclina√ß√£o evita entrada de √°gua da chuva. [cite: 144, 145]"},
            {q: "O que √© downstream?", o: ["Sinal que o CMTS envia para o Emta", "Sinal que o Emta envia para o CMTS", "Sinal de retorno", "Sinal do controle"], c: 0, t: 20, e: "√â o fluxo de dados da central para o assinante. [cite: 149, 150]"},
            {q: "Entrada 15/12. Quais n√≠veis estar√£o na sa√≠da TAP do DC 06?", o: ["CA: 09 dBmV, CB: 06 dBmV", "CA: 12,5 / CB: 9,5", "CA: 13,5 / CB: 10,5", "CA: 15 / CB: 12"], c: 0, t: 40, e: "O DC 6 reduz 6dB exatos na deriva√ß√£o. [cite: 154, 158]"},
            {q: "Entrada 19. No DC 12, quais os valores em OUT e TAP respectivamente?", o: ["18 dbmv e 7 dbmv", "16 dbmv e 7 dbmv", "17 dbmv e 8 dbmv", "19 dbmv e 8 dbmv"], c: 0, t: 40, e: "O DC 12 perde 1dB em OUT e 12dB no TAP. [cite: 159, 162]"},
            {q: "O que √© DOCSIS?", o: ["Padr√£o para interface de transmiss√£o de dados via cabo", "Recep√ß√£o de imagem", "Modem 50 mega", "Decoder HD"], c: 0, t: 25, e: "Protocolo padr√£o para comunica√ß√£o em redes coaxiais. [cite: 164, 165]"},
            {q: "O que acontece se amassarmos o cabo na instala√ß√£o?", o: ["Altera√ß√£o na imped√¢ncia caracter√≠stica do cabo", "Melhora blindagem", "Inverte o tilt", "Satura frequ√™ncia"], c: 0, t: 25, e: "Danos f√≠sicos alteram a imped√¢ncia de 75 Ohms. [cite: 169, 171]"},
            {q: "Quais as informa√ß√µes que n√£o podem faltar em um atendimento de excel√™ncia?", o: ["NOW, controle remoto e aplicativo MINHA CLARO", "Telefone do coordenador", "Apenas Bina", "Nenhuma"], c: 0, t: 30, e: "Encantar o cliente com recursos digitais. [cite: 174, 177]"},
            {q: "Local de instala√ß√£o do Emta visando cobertura Wi-Fi?", o: ["C√¥modo central (80% da casa entre -10 a -70dbm)", "Cozinha", "S√≥t√£o", "Perto do PC"], c: 0, t: 40, e: "Centraliza√ß√£o minimiza √°reas de sombra. [cite: 180, 185]"},
            {q: "O que √© PIP e em quais decodificadores est√° dispon√≠vel?", o: ["Recurso para visualizar outro canal (HDNG e 4K)", "Todos os decoders HD", "Apenas canal 270", "Apenas decoders SD"], c: 0, t: 35, e: "Dispon√≠vel para visualizar 2 canais em HDNG e 4K. [cite: 186, 188]"},
            {q: "Qual rede √© adequada para TV 4K Ultra HD via Wi-Fi?", o: ["5 GHZ (menos interfer√™ncia e maior banda)", "2.4 GHZ", "AM/FM", "Cabo coaxial"], c: 0, t: 30, e: "5GHz suporta o alto tr√°fego do 4K. [cite: 193, 198]"},
            {q: "O que √© REPLAY TV nos pacotes TOP HD / HD MAX e Claro tv+?", o: ["Recome√ßar evento atual ou acessar retroativos at√© 7 dias", "Gravar t√≠tulos do NOW", "Replay de gols", "Canais offline"], c: 0, t: 35, e: "Permite ver conte√∫dos de at√© uma semana atr√°s. [cite: 199, 204]"},
            {q: "Sobre a fun√ß√£o AUTODESLIGAR nos HDNGs:", o: ["N√£o deve ser desabilitada para manter atualizado", "Deve desabilitar sempre", "J√° vem desligado", "N√£o existe"], c: 0, t: 30, e: "Essencial para atualiza√ß√µes autom√°ticas. [cite: 205, 208]"},
            {q: "Melhor qualidade de sinal digital no diagn√≥stico?", o: ["PS 60%, QS 100% e BER -8", "PS 100%, QS 100% e BER -5", "PS 90%, QS 70%", "PS 95%"], c: 0, t: 30, e: "BER -8 indica sinal muito superior a -5. [cite: 211, 213]"},
            {q: "Quais recursos teremos em um decoder com Update ID 1?", o: ["Alta defini√ß√£o e Now (VOD)", "HD e Grava√ß√£o", "Apenas HD", "Somente Grava√ß√£o"], c: 0, t: 25, e: "Identifica equipamentos com HD e VOD. [cite: 216, 218]"},
            {q: "O que √© BER?", o: ["Taxa de erro de bit", "Erro de transmiss√£o", "Erro de modula√ß√£o", "N√≠vel de sinal"], c: 0, t: 15, e: "Bit Error Rate: integridade da transmiss√£o. [cite: 227, 231]"}
        ];

        let cur = 0, score = 0, timer, timeLeft, pName = "";

        document.getElementById('btn-iniciar').onclick = () => {
            pName = document.getElementById('p-name').value.trim();
            if(!pName) return alert("Por favor, digite seu nome!");
            document.getElementById('setup').classList.add('hidden');
            document.getElementById('quiz').classList.remove('hidden');
            loadQ();
        };

        function loadQ() {
            if(cur >= QUESTIONS.length) return finish();
            const q = QUESTIONS[cur];
            timeLeft = q.t;
            
            document.getElementById('p-fill').style.width = ((cur / QUESTIONS.length) * 100) + "%";
            document.getElementById('q-info').innerText = `QUEST√ÉO ${cur+1} DE ${QUESTIONS.length}`;
            document.getElementById('q-text').innerText = q.q;
            document.getElementById('explanation').classList.add('hidden');
            
            const box = document.getElementById('opts');
            box.innerHTML = "";

            // LOGICA ALEATORIA
            let indices = q.o.map((_, i) => i);
            indices.sort(() => Math.random() - 0.5);

            indices.forEach(idx => {
                const b = document.createElement('button');
                b.className = "btn";
                b.innerText = q.o[idx];
                b.onclick = () => select(idx, b);
                box.appendChild(b);
            });
            runTimer();
        }

        function runTimer() {
            const f = document.getElementById('t-fill');
            f.style.width = "100%";
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                f.style.width = (timeLeft/QUESTIONS[cur].t*100) + "%";
                if(timeLeft <= 0) select(-1, null);
            }, 1000);
        }

        function select(idx, b) {
            clearInterval(timer);
            const correctIdx = QUESTIONS[cur].c;
            const btns = document.querySelectorAll('.btn');
            btns.forEach(el => el.style.pointerEvents = "none");

            if(idx === correctIdx) {
                if(b) b.classList.add('correct');
                score += (100 + (timeLeft * 10));
                confetti({ particleCount: 50, spread: 60, origin: { y: 0.8 } });
            } else {
                if(b) b.classList.add('wrong');
                btns.forEach(btn => {
                    if(btn.innerText === QUESTIONS[cur].o[correctIdx]) btn.classList.add('correct');
                });
            }

            const exp = document.getElementById('explanation');
            exp.innerText = QUESTIONS[cur].e;
            exp.classList.remove('hidden');

            cur++;
            setTimeout(loadQ, 4000);
        }

        async function finish() {
            document.getElementById('quiz').classList.add('hidden');
            document.getElementById('result').classList.remove('hidden');
            document.getElementById('final-score').innerText = score;
            
            await setDoc(doc(db, "ranking", pName + "_" + Date.now()), { name: pName, score: score });
            calculateRank();
        }

        async function calculateRank() {
            const qSnap = await getDocs(query(collection(db, "ranking"), orderBy("score", "desc")));
            let rank = 1;
            qSnap.forEach(d => { if(d.data().score > score) rank++; });
            document.getElementById('user-rank').innerText = rank + "¬∫ lugar";
        }

        onSnapshot(query(collection(db, "ranking"), orderBy("score", "desc"), limit(10)), (snap) => {
            const list = document.getElementById('ranking-list');
            list.innerHTML = "";
            let i = 1;
            snap.forEach((doc) => {
                const d = doc.data();
                const isMe = (d.name === pName && d.score === score);
                let rankCls = i <= 3 ? 'rank-highlight' : '';
                list.innerHTML += `<li class="${rankCls} ${isMe ? 'rank-highlight' : ''}"><span>${i}. ${d.name}</span> <b>${d.score}</b></li>`;
                i++;
            });
        });
    </script>
</body>
</html>
