<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certifica√ß√£o Claro HFC - PROCISA</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --claro-red: #e31a1c; --procisa-blue: #000080; --bg: #f4f7f6; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); display: flex; justify-content: center; padding: 10px; margin: 0; }
        .card { width: 100%; max-width: 650px; background: #fff; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center; border-top: 8px solid var(--procisa-blue); margin-top: 20px; }
        .logo-procisa { width: 280px; margin-bottom: 15px; height: auto; }
        .btn { display: block; width: 100%; padding: 15px; margin: 10px 0; border: 2px solid #ddd; border-radius: 10px; cursor: pointer; background: #fff; font-size: 15px; font-weight: 500; text-align: left; padding-left: 20px; transition: 0.2s; line-height: 1.4; }
        .correct { background: #28a745 !important; color: white !important; border-color: #28a745 !important; }
        .wrong { background: #ff69b4 !important; color: white !important; border-color: #ff69b4 !important; }
        .timer-bar { height: 8px; background: #eee; border-radius: 4px; margin: 15px 0; overflow: hidden; }
        .timer-fill { height: 100%; background: var(--claro-red); width: 100%; transition: 1s linear; }
        .explanation-box { background: #fff9c4; padding: 15px; border-radius: 8px; margin-top: 15px; font-size: 14px; color: #444; border-left: 5px solid #fbc02d; text-align: left; line-height: 1.4; }
        .hidden { display: none !important; }
        input[type="text"] { width: 85%; padding: 12px; margin-bottom: 20px; border-radius: 8px; border: 1px solid #ccc; font-size: 16px; }
        #ranking-list { list-style: none; padding: 0; text-align: left; }
        #ranking-list li { padding: 10px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; }
    </style>
</head>
<body>

    <div id="setup" class="card">
        <img src="logo-procisa.png" class="logo-procisa" alt="Treinamento PROCISA">
        <h2>Preparat√≥rio para Certifica√ß√£o Claro HFC [cite: 2]</h2>
        <p>Avalia√ß√£o Final - Selecione a Alternativa Correta [cite: 3]</p>
        <input type="text" id="p-name" placeholder="Digite seu Nome Completo">
        <button id="btn-iniciar" class="btn" style="background: var(--claro-red); color: #fff; border: none; text-align: center; font-size: 18px;">INICIAR AVALIA√á√ÉO</button>
    </div>

    <div id="quiz" class="card hidden">
        <div id="q-info" style="font-weight: bold; color: #888;"></div>
        <div class="timer-bar"><div id="t-fill" class="timer-fill"></div></div>
        <h3 id="q-text" style="color: #333; text-align: left; line-height: 1.5; margin-bottom: 25px;"></h3>
        <div id="opts"></div>
        <div id="explanation" class="explanation-box hidden"></div>
    </div>

    <div id="result" class="card hidden">
        <img src="logo-procisa.png" style="width: 150px;">
        <h2 id="final-msg"></h2>
        <hr>
        <h4>üèÜ RANKING DOS T√âCNICOS</h4>
        <ul id="ranking-list"></ul>
        <button class="btn" style="text-align: center;" onclick="location.reload()">REFAZER AVALIA√á√ÉO</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { getFirestore, doc, setDoc, collection, query, orderBy, limit, onSnapshot, deleteDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBq8wjHbbLGh5mlhujzX2b_-FJX4e2AYzk",
            authDomain: "quiz-telecom-claro.firebaseapp.com",
            projectId: "quiz-telecom-claro",
            storageBucket: "quiz-telecom-claro.firebasestorage.app",
            messagingSenderId: "64474953672",
            appId: "1:64474953672:web:58520fea1375adf49532fd"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // BANCO DE DADOS INTEGRAL DAS QUEST√ïES DO ARQUIVO DOCX
        const QUESTIONS = [
            {q: "Nos casos onde os n√≠veis de sinal n√£o forem suficientes para atender todos os pontos, √© essencial:", o: ["Conferir se n√£o existe problemas com os n√≠veis da Rede Externa e MDU.", "Instruir o cliente para que ele saiba de poss√≠veis problemas em alguns pontos.", "Relatar os n√≠veis inadequados em Ordem de Servi√ßo sem orientar o cliente.", "Realizar a instala√ß√£o e informar ao Cliente que ele pode ligar na CRN caso tenha problemas."], c: 0, t: 30, e: "√â essencial conferir se n√£o existe problemas com os n√≠veis da Rede Externa e MDU[cite: 5]."},
            {q: "Qual o procedimento correto para o t√©cnico finalizar o preenchimento da O.S. DIGITAL?", o: ["O t√©cnico deve finalizar o processo de preenchimento da O.S. DIGITAL clicando no bot√£o 'adotar e assinar'", "O t√©cnico deve finalizar o processo de preenchimento da O.S. DIGITAL clicando no bot√£o 'concluir'", "O t√©cnico deve finalizar o processo de preenchimento da O.S. DIGITAL clicando no bot√£o 'avan√ßar'", "O t√©cnico deve finalizar o processo de preenchimento da O.S. DIGITAL clicando no bot√£o 'assinar ordem de servi√ßo'"], c: 0, t: 30, e: "O t√©cnico deve finalizar clicando no bot√£o 'adotar e assinar'[cite: 10]."},
            {q: "Com o gravador na Nuvem, os conte√∫dos gravados ficar√£o dispon√≠veis pelo per√≠odo de:", o: ["90 dias", "180 dias", "45 dias", "30 dias"], c: 3, t: 20, e: "Conte√∫dos gravados na nuvem ficam dispon√≠veis por 30 dias[cite: 18]."},
            {q: "Conforme procedimento de Baixa na URA, para o MAC 0023754F1608, √© necess√°rio digitar para o caractere hexadecimal (F):", o: ["*6", "*06", "6", "#6"], c: 1, t: 20, e: "Para o caractere hexadecimal (F) √© necess√°rio digitar *06[cite: 21]."},
            {q: "Sobre o teste de TRACERT, √© correto afirmar que:", o: ["Configura o Firewall", "√â um teste de rota para verificar lentid√£o, bloqueio ou gargalo ao site solicitado", "Mede a velocidade de navega√ß√£o", "Busca v√≠rus no computador"], c: 1, t: 35, e: "√â um teste de rota para verificar lentid√£o, bloqueio ou gargalo[cite: 26]."},
            {q: "Dentre as op√ß√µes abaixo, qual representa baixo potencial de barreira/interfer√™ncia para o sinal de Wi-Fi?", o: ["Madeira e Gesso", "√Ågua e √Årvores", "Concreto e Metal", "Micro-ondas"], c: 0, t: 25, e: "Madeira e Gesso representam baixo potencial de barreira[cite: 30]."},
            {q: "Dos padr√µes de redes Wi-Fi abaixo, qual nos proporciona a maior velocidade da taxa de transmiss√£o?", o: ["n", "b", "g", "ac"], c: 3, t: 20, e: "O padr√£o 'ac' nos proporciona a maior velocidade de transmiss√£o[cite: 38]."},
            {q: "Qual site devemos acessar para verificar a velocidade de conex√£o do CLARO V√≠rtua?", o: ["www.brasilbandalarga.com.br", "www.minhaconexao.com.br", "www.rjnet.com.br", "www.testesuavelocidade.com.br"], c: 0, t: 25, e: "O site oficial para verifica√ß√£o √© www.brasilbandalarga.com.br[cite: 40]."},
            {q: "Sobre o #NET WIFI, podemos afirmar que a rede de Spots em ruas e a rede exibida nos EMTA's 3.0:", o: ["As afirma√ß√µes 1 e 2 est√£o corretas", "Apenas a afirma√ß√£o 1 est√° correta", "Apenas a afirma√ß√£o 2 est√° correta", "Ambas est√£o incorretas"], c: 0, t: 30, e: "Ambas as afirma√ß√µes sobre #NET WIFI est√£o corretas[cite: 47]."},
            {q: "O que √© PIP:", o: ["Recurso para visualizar outro canal atrav√©s de uma pequena janela ao mesmo tempo que assiste ao programa principal", "Transfer√™ncia de arquivos entre clientes", "Visualiza√ß√£o de fotos no celular", "Pagamento de faturas pelo controle"], c: 0, t: 35, e: "PIP possibilita visualizar outro canal atrav√©s de uma pequena janela[cite: 52]."},
            {q: "Dos padr√µes de criptografia WiFi listados abaixo, qual √© considerado o mais seguro?", o: ["RADIUS PSK", "WEP", "WPA + TKIP", "WPA2 + AES"], c: 3, t: 25, e: "WPA2+AES √© considerado o padr√£o mais seguro[cite: 60]."},
            {q: "O que √© AutoHit?", o: ["Envio autom√°tico de HIT pelo controle remoto em equipamentos HD e HDMAX", "Envio autom√°tico de HIT em equipamentos SD", "Reset do decodificador", "Nenhuma das anteriores"], c: 0, t: 30, e: "AutoHit permite o envio autom√°tico de HIT em equipamentos HD e HDMAX[cite: 62]."},
            {q: "Qual o procedimento correto para realizar a valida√ß√£o de retorno?", o: ["Canal 262 + 8291", "Canal 262 + Menu + 8291", "Canal 262 + Menu + Tecla Azul + 8291", "Canal 262 + Tecla Azul + 8291 + Preenchimento da O.S. e Contrato"], c: 3, t: 35, e: "A valida√ß√£o √© feita via Canal 262 + Tecla Azul + 8291 + OS/Contrato[cite: 76]."},
            {q: "Qual o comando utilizado para renova√ß√£o do IP din√¢mico via prompt?", o: ["CHKDSK", "IPCONFIG /RELEASE", "IPCONFIG /RENEW", "IPCONFIG /ALL"], c: 2, t: 25, e: "O comando utilizado para renova√ß√£o do IP √© IPCONFIG /RENEW[cite: 81]."},
            {q: "Qual canal usamos para verifica√ß√£o dos endere√ß√°veis (CA ID e SmartCard) para realizar a baixa?", o: ["250", "252", "270", "272"], c: 2, t: 20, e: "O canal utilizado para verifica√ß√£o √© o 270[cite: 86]."},
            {q: "Para considerarmos um Decoder HD/HDMAX ON-line, o IP deve iniciar em:", o: ["10.xxx.xxx.xxx", "168.xxx.xxx.xxx", "189.xxx.xxx.xxx", "192.xxx.xxx.xxx"], c: 0, t: 30, e: "O IP do decoder ON-line deve iniciar em 10.xxx.xxx.xxx[cite: 89]."},
            {q: "Dentre as alternativas abaixo, qual delas apresenta uma melhor qualidade de sinal?", o: ["BER 1.0 E-05", "BER 1.0 E-07", "BER 2.0 E-08", "BER 9 E-06"], c: 2, t: 35, e: "O valor BER 2.0 E-08 representa a melhor qualidade dentre as op√ß√µes[cite: 96]."},
            {q: "Se o teste de download apresenta uma taxa de transfer√™ncia de 7,5MBps, qual a velocidade contratada?", o: ["100 Mbps", "12 Mbps", "120 Mbps", "60 Mbps"], c: 3, t: 35, e: "A taxa de 7,5MBps equivale a uma velocidade de 60 Mbps[cite: 107]."},
            {q: "Quais s√£o os servi√ßos inteligentes do CLARO FONE?", o: ["Bina, Conferencia a 3, Chamada em Espera, Siga-me e Bloqueio", "Confer√™ncia, PME, Portabilidade e Espera", "4 Extens√µes, Mesh e Bina", "Bloqueio e Identificador"], c: 0, t: 35, e: "Os servi√ßos incluem Bina, Confer√™ncia a 3, Espera, Siga-me e Bloqueio[cite: 109]."},
            {q: "Quais os movimentos que o sinal faz ao entrar no DC de 6?", o: ["Inser√ß√£o / Deriva√ß√£o / Isola√ß√£o", "Deriva√ß√£o / Isola√ß√£o / Inser√ß√£o", "Inser√ß√£o / Inser√ß√£o / Deriva√ß√£o", "Isola√ß√£o / Isola√ß√£o / Deriva√ß√£o"], c: 0, t: 30, e: "Os movimentos s√£o Inser√ß√£o, Deriva√ß√£o e Isola√ß√£o[cite: 114]."},
            {q: "Um IP Nateado come√ßa com qual n√∫mero?", o: ["102.168.2.34", "100.981.5.23", "255.255.255.0", "192.168.0.1"], c: 1, t: 20, e: "Um IP Nateado inicia com 100.xxx[cite: 120]."},
            {q: "Ao identificar falta de disponibilidade de HP no TAP ao iniciar uma instala√ß√£o, o que fazer?", o: ["Usar divisor", "N√£o realizar a instala√ß√£o, baixar como #205 e abrir ocorr√™ncia PE1", "Baixar como #203", "Baixar como #409"], c: 1, t: 40, e: "Deve-se baixar com c√≥digo #205 e abrir a ocorr√™ncia PE1[cite: 136]."},
            {q: "Qual a intensidade de sinal wifi ideal medida pelo Analyzer?", o: ["-10 a -70 dBm", "40dbmv a 52dbmv", "-12 a +12 dbmv", "Sempre acima de zero"], c: 0, t: 25, e: "A intensidade da conex√£o deve ser de -10 a -70 dBm[cite: 140]."},
            {q: "Qual a inclina√ß√£o correta da furadeira ao furar de dentro para fora?", o: ["15¬∞ para baixo", "15¬∞ para cima", "√Çngulo reto", "45¬∞ para cima"], c: 0, t: 25, e: "Deve-se inclinar a furadeira 15¬∞ para baixo[cite: 145]."},
            {q: "O que √© downstream?", o: ["Sinal que o CMTS envia para o Emta", "Sinal que o Emta envia para o CMTS", "Sinal do medidor", "Sinal de retorno"], c: 0, t: 20, e: "√â o sinal que o CMTS envia para o Emta[cite: 150]."},
            {q: "Refer√™ncia 15 dbmv (CA) e 12 dbmv (CB). Quais n√≠veis na sa√≠da TAP do DC 06?", o: ["CA: 12,5 / CB: 9,5", "CA: 13,5 / CB: 10,5", "CA: 15 / CB: 12", "CA: 09 / CB: 06"], c: 3, t: 40, e: "Os n√≠veis ser√£o CA: 09 dBmV e CB: 06 dBmV[cite: 158]."},
            {q: "Refer√™ncia 19 dBmV em 550 MHz. Sa√≠das OUT e TAP no DC 12?", o: ["16 / 7", "17 / 8", "18 / 7", "19 / 8"], c: 2, t: 40, e: "O sinal nas sa√≠das ser√° 18 dbmv (OUT) e 7 dbmv (TAP)[cite: 162]."},
            {q: "O que √© DOCSIS?", o: ["Padr√£o para interface de transmiss√£o de dados via cabo", "Recep√ß√£o de imagem via cabo", "Tecnologia acima de 50 mega", "Tecnologia de decodificadores"], c: 0, t: 20, e: "√â o padr√£o para interface de transmiss√£o de dados via cabo[cite: 165]."},
            {q: "O que acontece ao amassar o cabo no momento da instala√ß√£o?", o: ["Aumenta blindagem", "Altera a imped√¢ncia caracter√≠stica do cabo", "Inverte o tilt", "Satura frequ√™ncia"], c: 1, t: 25, e: "Ocorre uma altera√ß√£o na imped√¢ncia caracter√≠stica do cabo[cite: 171]."},
            {q: "Informa√ß√µes indispens√°veis para um atendimento de excel√™ncia?", o: ["Telefone do t√©cnico", "NOW, instru√ß√£o do controle e App MINHA CLARO RESIDENCIAL", "Telefone do coordenador", "Nenhuma"], c: 1, t: 30, e: "Essencial apresentar o NOW, controle e App MINHA CLARO[cite: 177]."},
            {q: "Local de instala√ß√£o do Emta para cobertura Wi-Fi?", o: ["Cozinha", "S√≥t√£o", "Lugar onde o sinal fique -90dbm", "C√¥modo central com sinal entre -10 a -70dbm (80% da casa)"], c: 3, t: 40, e: "Deve-se buscar o c√¥modo central com cobertura -10 a -70dbm[cite: 185]."},
            {q: "O que √© PIP e em quais decoders est√° dispon√≠vel?", o: ["Recurso para visualizar outro canal em janela pequena (HDNG e 4K)", "Recurso para todos os decoders HD", "Recurso do canal 270", "Alerta de sinal"], c: 0, t: 35, e: "Recurso para visualizar outro canal em janela pequena (HDNG e 4K)[cite: 188]."},
            {q: "Qual rede Wi-Fi √© adequada para TV 4K Ultra HD?", o: ["2.4 GHz (menor interfer√™ncia)", "2.4 GHz (maior banda)", "5 GHz (mais interfer√™ncia)", "5 GHz (menos interfer√™ncia e maior banda)"], c: 3, t: 30, e: "A rede 5 GHZ sofre menos interfer√™ncia e possui maior banda[cite: 198]."},
            {q: "O que √© REPLAY TV?", o: ["Gravar t√≠tulos do NOW", "Assistir novamente toda a programa√ß√£o", "Replay de jogos e gols", "Recome√ßar evento atual ou acessar retroativos at√© 7 dias"], c: 3, t: 35, e: "Permite recome√ßar o evento atual ou acessar retroativos at√© 7 dias[cite: 203]."},
            {q: "Sobre a fun√ß√£o AUTODESLIGAR nos HDNGs:", o: ["Desabilitar para evitar visitas", "N√£o desabilitar para manter atualizado", "J√° vem desabilitada", "J√° vem habilitada"], c: 1, t: 30, e: "A fun√ß√£o n√£o deve ser desabilitada para manter o software atualizado[cite: 207]."},
            {q: "Melhor qualidade de sinal Digital (Diagn√≥stico)?", o: ["PS 100%, QS 100% e BER -5", "PS 60%, QS 100% e BER -8", "PS 90%, QS 70%", "PS 95%"], c: 1, t: 30, e: "A melhor qualidade √© representada por PS 60%, QS 100% e BER -8[cite: 213]."},
            {q: "Quais recursos teremos em um decoder com Update ID 1?", o: ["HD, Grava√ß√£o e NOW", "Alta defini√ß√£o e Now (VOD)", "HD e servi√ßo de grava√ß√£o", "Somente HD"], c: 1, t: 25, e: "Decoder com Update ID 1 possui Alta defini√ß√£o e Now[cite: 218]."},
            {q: "Para evitar lentid√£o por congestionamento Wi-Fi, devemos:", o: ["Usar sempre canal 11", "Pot√™ncia -40dBm", "C√¥modo central", "Canal Autom√°tico e orientar boot no Emta"], c: 3, t: 35, e: "Deve-se deixar em autom√°tico e orientar boot no Emta[cite: 225]."},
            {q: "O que √© BER?", o: ["Erro de transmiss√£o", "Erro de recep√ß√£o", "Erro de modula√ß√£o", "Taxa de erro de bit"], c: 3, t: 15, e: "BER significa Taxa de erro de bit[cite: 231]."}
        ];

        let cur = 0, score = 0, timer, timeLeft, pName = "";

        // FUN√á√ïES GLOBAIS
        function loadQ() {
            if(cur >= QUESTIONS.length) return finish();
            const q = QUESTIONS[cur];
            timeLeft = q.t;
            document.getElementById('q-info').innerText = `Quest√£o ${cur+1} de ${QUESTIONS.length}`;
            document.getElementById('q-text').innerText = q.q;
            document.getElementById('explanation').classList.add('hidden');
            const box = document.getElementById('opts');
            box.innerHTML = "";
            q.o.forEach((opt, i) => {
                const b = document.createElement('button');
                b.className = "btn";
                b.innerText = opt;
                b.onclick = () => select(i, b);
                box.appendChild(b);
            });
            runTimer();
        }

        function runTimer() {
            const f = document.getElementById('t-fill');
            f.style.width = "100%";
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                f.style.width = (timeLeft/QUESTIONS[cur].t*100) + "%";
                if(timeLeft <= 0) select(-1, null);
            }, 1000);
        }

        function select(idx, clickedBtn) {
            clearInterval(timer);
            const correctIdx = QUESTIONS[cur].c;
            const btns = document.querySelectorAll('.btn');
            btns.forEach(b => b.style.pointerEvents = "none");

            if(idx === correctIdx) {
                if(clickedBtn) clickedBtn.classList.add('correct');
                score += (100 + (timeLeft * 10));
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            } else {
                if(clickedBtn) clickedBtn.classList.add('wrong');
                btns[correctIdx].classList.add('correct'); // DESTAQUE VERDE NA CORRETA
            }

            const expBox = document.getElementById('explanation');
            expBox.innerText = `üí° EXPLICA√á√ÉO: ${QUESTIONS[cur].e}`;
            expBox.classList.remove('hidden');

            cur++;
            setTimeout(loadQ, 4500);
        }

        async function finish() {
            document.getElementById('quiz').classList.add('hidden');
            document.getElementById('result').classList.remove('hidden');
            document.getElementById('final-msg').innerText = `${pName}, sua pontua√ß√£o: ${score} pts!`;
            await setDoc(doc(db, "ranking", pName + "_" + Date.now()), { name: pName, score: score });
        }

        // VINCULANDO O BOT√ÉO AO SCRIPT (FORA DO M√ìDULO N√ÉO FUNCIONA)
        document.getElementById('btn-iniciar').onclick = function() {
            pName = document.getElementById('p-name').value;
            if(!pName) return alert("Por favor, digite seu nome completo!");
            document.getElementById('setup').classList.add('hidden');
            document.getElementById('quiz').classList.remove('hidden');
            loadQ();
        };

        // RANKING
        const qRank = query(collection(db, "ranking"), orderBy("score", "desc"), limit(10));
        onSnapshot(qRank, (snap) => {
            const list = document.getElementById('ranking-list');
            list.innerHTML = "";
            snap.forEach((doc) => {
                const d = doc.data();
                list.innerHTML += `<li><span>${d.name}</span> <b>${d.score} pts</b></li>`;
            });
        });

        // RESET
        window.resetRanking = async () => {
            const pass = prompt("Senha:");
            if(pass === "admin123") {
                const querySnapshot = await getDocs(collection(db, "ranking"));
                querySnapshot.forEach(async (d) => { await deleteDoc(doc(db, "ranking", d.id)); });
                alert("Ranking reiniciado!");
            }
        };
    </script>
</body>
</html>
