<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Certifica√ß√£o Claro HFC - PROCISA PRO</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { 
            --claro-red: #e50914; --procisa-blue: #000080;
            --success: #2ecc71; --error: #e74c3c; --bg: #ffffff; 
        }
        body { 
            font-family: 'Segoe UI', Roboto, sans-serif; background: #f4f7f9; 
            color: #333; display: flex; justify-content: center; align-items: flex-start;
            min-height: 100vh; margin: 0; padding: 10px; box-sizing: border-box;
        }
        .card { 
            width: 100%; max-width: 500px; background: var(--bg); padding: 20px; 
            border-radius: 15px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-top: 10px; border-top: 8px solid var(--procisa-blue);
        }
        .logo-procisa { width: 100%; max-width: 200px; margin-bottom: 15px; }
        .btn { 
            display: block; width: 100%; padding: 16px; margin: 10px 0; 
            border: 2px solid #eee; border-radius: 10px; cursor: pointer; 
            background: #fff; font-size: 15px; font-weight: 500; text-align: left;
            transition: 0.2s; box-sizing: border-box;
        }
        .btn-start { background: var(--claro-red); color: white; text-align: center; font-weight: bold; border: none; }
        .correct { background: var(--success) !important; color: white !important; border-color: #27ae60; }
        .wrong { background: var(--error) !important; color: white !important; border-color: #c0392b; }
        .timer-bar { height: 6px; background: #eee; border-radius: 3px; margin: 15px 0; overflow: hidden; }
        .timer-fill { height: 100%; background: var(--claro-red); width: 100%; transition: 1s linear; }
        .status-box { padding: 15px; border-radius: 12px; margin: 15px 0; font-weight: bold; font-size: 1.2rem; }
        .aprovado { background: #d4edda; color: #155724; border: 2px solid #c3e6cb; }
        .reprovado { background: #f8d7da; color: #721c24; border: 2px solid #f5c6cb; }
        #ranking-list { padding: 0; text-align: left; }
        #ranking-list li { 
            list-style: none; background: #f9f9f9; padding: 10px; margin: 5px 0; 
            border-radius: 8px; display: flex; justify-content: space-between; font-size: 0.85rem;
        }
        .hidden { display: none !important; }
        input[type="text"] { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; margin-bottom: 15px; box-sizing: border-box; text-align: center; }
        .progress-container { width: 100%; background: #eee; height: 6px; border-radius: 3px; margin-bottom: 10px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--procisa-blue); width: 0%; transition: width 0.5s ease; }
    </style>
</head>
<body>

    <div id="setup" class="card">
        <img src="logo-procisa.png" class="logo-procisa" alt="PROCISA">
        <h1 style="font-size: 1.4rem; color: var(--procisa-blue);">Certifica√ß√£o HFC PRO</h1>
        <p style="font-size: 0.9rem;">Meta para Aprova√ß√£o: 70% de acertos</p>
        <input type="text" id="p-name" placeholder="Nome Completo do T√©cnico">
        <button id="btn-iniciar" class="btn btn-start">INICIAR EXAME</button>
    </div>

    <div id="quiz" class="card hidden">
        <div class="progress-container"><div id="p-fill" class="progress-fill"></div></div>
        <div id="q-info" style="font-size: 0.7rem; font-weight: bold; color: #999;"></div>
        <div class="timer-bar"><div id="t-fill" class="timer-fill"></div></div>
        <h3 id="q-text" style="text-align: left; font-size: 1rem; line-height: 1.3;"></h3>
        <div id="opts"></div>
        <div id="explanation" class="hidden" style="background: #fff9c4; padding: 12px; border-radius: 8px; margin-top: 10px; text-align: left; font-size: 0.85rem; border-left: 4px solid #fbc02d;"></div>
    </div>

    <div id="result" class="card hidden">
        <img src="logo-procisa.png" style="width: 120px; margin-bottom: 10px;">
        <div id="status-display" class="status-box"></div>
        <p id="performance-summary" style="font-size: 0.9rem; font-weight: bold;"></p>
        <div id="ranking-container">
            <h4 style="border-bottom: 1px solid #eee; padding-bottom: 5px; text-align: left; font-size: 0.9rem;">TOP 5 ELITE</h4>
            <ul id="ranking-list"></ul>
            <p id="incentive-msg" class="hidden" style="color: var(--claro-red); font-weight: bold; margin-top: 15px; font-size: 0.9rem;">Vamos refazer para que seu nome apare√ßa no ranking?</p>
        </div>
        <button class="btn btn-start" style="margin-top: 15px;" onclick="location.reload()">REFAZER AVALIA√á√ÉO üöÄ</button>
    </div>

    <audio id="snd-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="snd-wrong" src="https://assets.mixkit.co/active_storage/sfx/1114/1114-preview.mp3"></audio>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
        import { getFirestore, doc, setDoc, collection, query, orderBy, limit, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBq8wjHbbLGh5mlhujzX2b_-FJX4e2AYzk",
            authDomain: "quiz-telecom-claro.firebaseapp.com",
            projectId: "quiz-telecom-claro",
            storageBucket: "quiz-telecom-claro.firebasestorage.app",
            messagingSenderId: "64474953672",
            appId: "1:64474953672:web:58520fea1375adf49532fd"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // QUEST√ïES COM ORDEM FIXA DE RESPOSTAS (A, B, C, D) [cite: 1-231]
        const QUESTIONS = [
            {q: "Nos casos onde os n√≠veis de sinal n√£o forem suficientes para atender todos os pontos, √© essencial:", o: ["A - Conferir se n√£o existe problemas com os n√≠veis da Rede Externa e MDU.", "B ‚Äì Instruir o cliente para que ele saiba de poss√≠veis problemas em alguns pontos.", "C ‚Äì Relatar os n√≠veis inadequados em Ordem de Servi√ßo sem orientar o cliente.", "D ‚Äì Realizar a instala√ß√£o e informar ao Cliente que ele pode ligar na CRN caso tenha problemas."], c: 0, t: 35, e: "Sempre valide se o problema n√£o √© externo antes de prosseguir. [cite: 5]"},
            {q: "Qual o procedimento correto para o t√©cnico finalizar o preenchimento da O.S. DIGITAL?", o: ["A ‚Äì O t√©cnico deve finalizar o processo de preenchimento da O.S. DIGITAL clicando no bot√£o ‚Äúadotar e assinar‚Äù", "B ‚Äì O t√©cnico deve finalizar o processo de preenchimento da O.S. DIGITAL clicando no bot√£o ‚Äúconcluir‚Äù", "C - O t√©cnico deve finalizar o processo de preenchimento da O.S. DIGITAL clicando no bot√£o ‚Äúavan√ßar‚Äù", "D - O t√©cnico deve finalizar o processo de preenchimento da O.S. DIGITAL clicando no bot√£o ‚Äúassinar ordem de servi√ßo‚Äù"], c: 0, t: 35, e: "O bot√£o 'adotar e assinar' √© o passo final obrigat√≥rio. [cite: 10]"},
            {q: "Com o gravador na Nuvem, os conte√∫dos gravados ficar√£o dispon√≠veis pelo per√≠odo de:", o: ["A ‚Äì 90 dias contados a partir da data de grava√ß√£o", "B ‚Äì 180 dias contados a partir da data de grava√ß√£o.", "C ‚Äì 45 dias contados a partir da data de grava√ß√£o.", "D ‚Äì 30 dias contados a partir da data de grava√ß√£o."], c: 3, t: 25, e: "O per√≠odo de reten√ß√£o para grava√ß√µes em nuvem √© de 30 dias. [cite: 18]"},
            {q: "Conforme procedimento de Baixa na URA, para o MAC 0023754F1608, √© necess√°rio digitar para o caractere hexadecimal (F):", o: ["A - *6", "B - *06", "C ‚Äì 6", "D - #6"], c: 1, t: 20, e: "O c√≥digo *06 substitui a letra F na URA. [cite: 21]"},
            {q: "Sobre o teste de TRACERT, √© correto afirmar que:", o: ["A ‚Äì √â um comando para configurar, habilitar ou desabilitar o Firewall da m√°quina", "B ‚Äì √â um teste de rota que visualiza a solicita√ß√£o de acesso a uma determinada p√°gina ou servidor com o objetivo de verificar lentid√£o, bloqueio ou gargalo ao site solicitado", "C ‚Äì √â um teste para determinar se a velocidade da navega√ß√£o do cliente est√° dentro ou fora da velocidade contratada.", "D ‚Äì √â um teste para verificar a exist√™ncia de v√≠rus ou Cavalo de Tr√≥ia no computador do cliente."], c: 1, t: 35, e: "O tracert rastreia o caminho do pacote para identificar falhas. [cite: 26]"},
            {q: "Dentre as op√ß√µes abaixo, qual representa baixo potencial de barreira/interfer√™ncia para o sinal de Wi-Fi?", o: ["A ‚Äì Madeira e Gesso", "B ‚Äì √Ågua e √Årvores", "C ‚Äì Concreto e Metal", "D ‚Äì Micro-ondas e Telefone sem fio."], c: 0, t: 25, e: "Madeira e Gesso facilitam a propaga√ß√£o do sinal. [cite: 30]"},
            {q: "Dos padr√µes de redes Wi-Fi abaixo, qual nos proporciona a maior velocidade da taxa de transmiss√£o?", o: ["A ‚Äì n", "B ‚Äì b", "C ‚Äì g", "D ‚Äì ac"], c: 3, t: 25, e: "O padr√£o 802.11ac √© superior em throughput. [cite: 38]"},
            {q: "Qual site devemos acessar para verificar a velocidade de conex√£o do CLARO V√≠rtua?", o: ["A ‚Äì www.brasilbandalarga.com.br", "B ‚Äì www.minhaconexao.com.br", "C ‚Äì www.rjnet.com.br", "D ‚Äì www.testesuavelocidade.com.br"], c: 0, t: 25, e: "Site homologado pela Anatel. [cite: 40]"},
            {q: "Sobre o #NET WIFI, podemos afirmar que a rede de Spots e a rede nos EMTA‚Äôs 3.0:", o: ["A ‚Äì As afirma√ß√µes 1 e 2 est√£o corretas", "B ‚Äì Apenas a afirma√ß√£o 1 est√° correta", "C - Apenas a afirma√ß√£o 2 est√° correta", "D ‚Äì As afirma√ß√µes n√£o s√£o corretas."], c: 0, t: 30, e: "Ambas as defini√ß√µes sobre #NET WIFI est√£o corretas. [cite: 47]"},
            {q: "O que √© PIP:", o: ["A ‚Äì O PIP ( Picture in Picture ) √© um recurso que possibilita visualizar outro canal atrav√©s de uma pequena janela, ao mesmo tempo que assiste a um programa na tela principal.", "B - Recurso que possibilita a transfer√™ncia de dados e arquivos entre os clientes.", "C - Recurso que possibilita a visualiza√ß√£o das imagens armazenadas na rede do cliente em seu telefone.", "D - Recurso que possibilita o pagamento da fatura da Claro atrav√©s do controle remoto."], c: 0, t: 30, e: "PIP permite assistir dois canais ao mesmo tempo. [cite: 52]"},
            {q: "Dos padr√µes de criptografia WiFi listados abaixo, qual √© considerado o mais seguro?", o: ["A ‚Äì RADIUS PSK", "B ‚Äì WEP", "C ‚Äì WPA + TKIP", "D ‚Äì WPA2 +AES"], c: 3, t: 25, e: "WPA2+AES √© o padr√£o mais robusto dispon√≠vel. [cite: 60]"},
            {q: "O que √© AutoHit?", o: ["A ‚Äì Funcionalidade que permite o envio autom√°tico de HIT pelo controle remoto em equipamentos HD e HDMAX", "B - Funcionalidade para equipamentos SD, HD e HDMAX", "C ‚Äì Funcionalidade para o reset do decodificador", "D ‚Äì Todas as alternativas est√£o corretas."], c: 0, t: 30, e: "Facilita a ativa√ß√£o diretamente pelo controle HD/HDMAX. [cite: 62]"},
            {q: "Sobre a configura√ß√£o dos servi√ßos inteligentes do ClaroFone, qual est√° correta?", o: ["A ‚Äì O SIGA-ME n√£o est√° dispon√≠vel para pacotes com Busca Autom√°tica.", "B ‚Äì O SIGA-ME s√≥ pode ser habilitado ap√≥s o pagamento da 1¬∫ fatura.", "C ‚Äì Ao configurar o SIGA-ME, desative o CHAMADA EM ESPERA.", "D ‚Äì Todas as op√ß√µes est√£o corretas."], c: 3, t: 35, e: "A regra de servi√ßos inteligentes engloba v√°rias funcionalidades. [cite: 71]"},
            {q: "Qual o procedimento correto para realizar a valida√ß√£o de retorno?", o: ["A ‚Äì Canal 262 + 8291", "B ‚Äì Canal 262 + Menu + 8291", "C ‚Äì Canal 262 + Menu + Tecla Azul + 8291", "D ‚Äì Canal 262 + Tecla Azul + 8291 + Preenchimento da n√∫mero da O.S. e Contrato"], c: 3, t: 35, e: "A valida√ß√£o t√©cnica exige o acesso via canal 262 + Tecla Azul. [cite: 76]"},
            {q: "Qual o comando correto para for√ßar a renova√ß√£o de um IPV4 ou IPV6?", o: ["A ‚Äì N√£o √© poss√≠vel for√ßar a renova√ß√£o do IP", "B ‚Äì N√£o, o comando que utilizamos para renova√ß√£o do IP √© CHKDSK", "C ‚Äì N√£o, o comando que utilizamos para renova√ß√£o do IP √© IPCONFIG /RENEW", "D ‚Äì Sim, a afirma√ß√£o est√° correta."], c: 2, t: 25, e: "O comando /renew solicita nova concess√£o ao DHCP. [cite: 81]"},
            {q: "Qual canal usamos para verifica√ß√£o dos endere√ß√°veis (CA ID e SmartCard) para realizar a baixa?", o: ["A ‚Äì 250", "B ‚Äì 252", "C ‚Äì 270", "D ‚Äì 272"], c: 2, t: 25, e: "O canal 270 exibe dados para a confer√™ncia final. [cite: 86]"},
            {q: "Para considerarmos um Decoder HD/HDMAX ON-line, qual op√ß√£o √© a correta?", o: ["A ‚Äì Nas configura√ß√µes verificar se o IP inicia em: 10.xxx.xxx.xxx", "B - Nas configura√ß√µes verificar se o IP inicia em: 168.xxx.xxx.xxx", "C - Nas configura√ß√µes verificar se o IP inicia em: 189.xxx.xxx.xxx", "D - Nas configura√ß√µes verificar se o IP inicia em: 192.xxx.xxx.xxx"], c: 0, t: 30, e: "Rede de ger√™ncia Claro utiliza IPs classe 10. [cite: 89]"},
            {q: "Dentre as alternativas abaixo, qual delas apresenta uma melhor qualidade de sinal?", o: ["A ‚Äì BER 1.0 E-05", "B - BER 1.0 E-07", "C - BER 2.0 E-08", "D - BER 9 E-06"], c: 2, t: 35, e: "Quanto menor o BER, melhor. E-08 √© excelente. [cite: 96]"},
            {q: "Ao t√©rmino de uma instala√ß√£o, se o servi√ßo de grava√ß√£o n√£o funciona, deve-se:", o: ["A ‚Äì Confere o UPDATE ID", "B ‚Äì Conferir se o servi√ßo est√° ativo em seu contrato", "C ‚Äì Enviar HIT para o Decoder", "D ‚Äì Todas as alternativas est√£o corretas"], c: 3, t: 35, e: "Valida√ß√£o completa inclui contrato, Update ID e sinal. [cite: 102]"},
            {q: "Download de 7,5MBps equivale a qual velocidade contratada?", o: ["A ‚Äì 100 Mbps", "B ‚Äì 12 Mbps", "C ‚Äì 120 Mbps", "D ‚Äì 60 Mbps"], c: 3, t: 45, e: "Convers√£o: 7,5 MBps * 8 bits = 60 Mbps. [cite: 107]"},
            {q: "Descreva os servi√ßos inteligentes do CLARO FONE?", o: ["A ‚Äì Bina, Conferencia a 3, Chamada em Espera, Siga-me e Bloqueio", "B ‚Äì Confer√™ncia, PME, Portabilidade e Identificador", "C ‚Äì 4 Extens√µes, Mesh, Bina e Identificador", "D ‚Äì Consultanumero.ABRTelecom e Bina"], c: 0, t: 35, e: "Engloba os servi√ßos b√°sicos de ger√™ncia de chamadas. [cite: 109]"},
            {q: "Quais os movimentos que o sinal faz ao entrar no DC de 6?", o: ["A ‚Äì Inser√ß√£o / Deriva√ß√£o / Isola√ß√£o", "B ‚Äì Deriva√ß√£o / Isola√ß√£o / Inser√ß√£o", "C ‚Äì Inser√ß√£o / Inser√ß√£o / Deriva√ß√£o", "D ‚Äì Isola√ß√£o / Isola√ß√£o / Deriva√ß√£o"], c: 0, t: 35, e: "Componentes direcionais t√™m essas perdas espec√≠ficas. [cite: 114]"},
            {q: "Um IP Nateado come√ßa com qual n√∫mero?", o: ["A ‚Äì 102.168.2.34", "B ‚Äì 100.981.5.23", "C ‚Äì 255.255.255.0", "D ‚Äì 192.168.0.1"], c: 1, t: 25, e: "IP CGNAT utiliza a faixa reservada 100. [cite: 120]"},
            {q: "Sobre o NOW / CLARO TV+ selecione a alternativa correta:", o: ["A ‚Äì Aluguel pago por TV, computador ou aplicativo", "B ‚Äì Cadastro de at√© 5 dispositivos m√≥veis", "C ‚Äì Play em 1 dispositivo m√≥vel e 1 computador simultaneamente", "D ‚Äì Todas as alternativas est√£o corretas."], c: 3, t: 35, e: "Permite ampla conectividade e consumo de m√≠dia. [cite: 127]"},
            {q: "Dos padr√µes de criptografia wi-fi, qual √© o mais seguro?", o: ["A - WEP", "B - WAP", "C - WPA", "D - WPA2"], c: 3, t: 25, e: "WPA2 √© o padr√£o de seguran√ßa mais robusto. [cite: 132]"},
            {q: "Sem disponibilidade de HP no tap ao iniciar a instala√ß√£o, deve-se:", o: ["A ‚Äì Inserir um divisor na rede normalmente", "B ‚Äì Baixar como #205 e abrir ocorr√™ncia PE1", "C ‚Äì Baixar como #203 para a rede externa", "D ‚Äì Inserir divisor na rede externa e baixar como #409"], c: 1, t: 40, e: "TAP lotado exige abertura de ocorr√™ncia f√≠sica PE1. [cite: 136]"},
            {q: "Como verificar se o sinal Wi-Fi da casa √© suficiente para internet?", o: ["A ‚Äì Intensidade entre -10 a -70 dBm no Wifi Analyzer", "B ‚Äì Curvatura entre 40dbmv a 52dbmv no analyzer", "C ‚Äì Canal com sinais entre -12 e +12 dbmv", "D ‚Äì Usar canal livre para deixar o sinal fraco"], c: 0, t: 35, e: "Intervalo padr√£o para garantir link est√°vel. [cite: 140]"},
            {q: "Qual a inclina√ß√£o correta da furadeira para furos expostos ao tempo?", o: ["A ‚Äì De dentro para fora, inclinando 15¬∞ para baixo", "B ‚Äì De dentro para fora, 15¬∞ para cima", "C ‚Äì De dentro para fora em √¢ngulo reto", "D ‚Äì De fora para dentro, 15¬∞ para baixo"], c: 0, t: 35, e: "Inclina√ß√£o para baixo impede entrada de √°gua. [cite: 145]"},
            {q: "O que √© downstream?", o: ["A ‚Äì Sinal que o CMTS envia para o Emta.", "B ‚Äì Sinal que o Emta envia para o cmts.", "C ‚Äì Sinal que o medido envia para o EMTA.", "D ‚Äì Sinal que o Emta envia para o medidor."], c: 0, t: 25, e: "Fluxo de tr√°fego que 'desce' para o cliente. [cite: 150]"},
            {q: "Entrada 15/12. Quais n√≠veis estar√£o na sa√≠da TAP do DC 06?", o: ["A ‚Äì CA: 12,5 dBmV, CB 9,5 dBmV", "B ‚Äì CA: 13,5 dBmV, CB: 10,5 dBmV", "C ‚Äì CA: 15 dBmV, CB: 12 dBmV", "D ‚Äì CA: 09 dBmV, CB: 06 dBmV"], c: 3, t: 45, e: "O DC 6 reduz 6dB exatos na deriva√ß√£o TAP. [cite: 158]"},
            {q: "Entrada 19 em 550 MHz. Sa√≠das OUT e TAP no DC 12?", o: ["A ‚Äì 16 dbmv e 7 dbmv", "B ‚Äì 17 dbmv e 8 dbmv", "C ‚Äì 18 dbmv e 7 dbmv", "D ‚Äì 19 dbmv e 8 dbmv"], c: 2, t: 45, e: "Perda de 1dB em OUT e 12dB no TAP (19-12=7). [cite: 162]"},
            {q: "O que voc√™ entende por DOCSIS?", o: ["A ‚Äì Padr√£o para interface de transmiss√£o de dados via cabo", "B ‚Äì Interface de recep√ß√£o de imagem via cabo", "C ‚Äì Tecnologia para velocidades acima de 50 mega", "D ‚Äì Tecnologia de decodificadores HD"], c: 0, t: 30, e: "Protocolo padr√£o para comunica√ß√£o em redes coaxiais. [cite: 165]"},
            {q: "O que acontece com o sinal se amassarmos o cabo na instala√ß√£o?", o: ["A ‚Äì Aumenta a blindagem", "B ‚Äì Altera√ß√£o na imped√¢ncia caracter√≠stica do cabo", "C ‚Äì Invers√£o do tilt alto/baixo", "D ‚Äì Satura frequ√™ncias altas"], c: 1, t: 30, e: "Danos f√≠sicos alteram os 75 Ohms do cabo. [cite: 171]"},
            {q: "Quais informa√ß√µes n√£o podem faltar em um atendimento de excel√™ncia?", o: ["A ‚Äì Telefone da central e do coordenador", "B ‚Äì NOW, controle remoto e App MINHA CLARO RESIDENCIAL.", "C ‚Äì Informar seu telefone pessoal", "D ‚Äì Nenhuma das anteriores"], c: 1, t: 35, e: "Refor√ßar a experi√™ncia digital do assinante. [cite: 177]"},
            {q: "Qual o local ideal de instala√ß√£o do Emta para cobertura WI-FI?", o: ["A ‚Äì Na cozinha (onde ficam mais pessoas)", "B ‚Äì No ponto mais alto (teto ou s√≥t√£o)", "C ‚Äì Onde o sinal fique entre -70 e -90 dBm", "D ‚Äì C√¥modo central cobrindo 80% da casa entre -10 a -70dbm"], c: 3, t: 45, e: "Centraliza√ß√£o evita √°reas de sombra de sinal. [cite: 185]"},
            {q: "O que √© PIP e em quais decodificadores est√° dispon√≠vel?", o: ["A ‚Äì Visualizar outro canal em janela pequena (HDNG e 4K)", "B ‚Äì Visualizar outro canal em janela pequena (Todos os HD)", "C ‚Äì Visualizar n√≠veis no canal 270", "D ‚Äì Som emitido quando o sinal est√° fora do padr√£o"], c: 0, t: 35, e: "Recurso PIP dispon√≠vel em HDNG e 4K. [cite: 188]"},
            {q: "Rede Wi-Fi adequada para TV 4K Ultra HD via Wi-Fi?", o: ["A ‚Äì Rede 2.4 GHZ (menos interfer√™ncia / banda menor)", "B ‚Äì Rede 2.4 GHZ (mais interfer√™ncia / banda maior)", "C ‚Äì Rede 5 GHZ (mais interfer√™ncia / banda maior)", "D ‚Äì Rede 5 GHZ (menos interfer√™ncia / banda maior)"], c: 3, t: 35, e: "5GHz suporta o alto tr√°fego de dados UHD. [cite: 198]"},
            {q: "O que √© REPLAY TV nos pacotes TOP HD / HD MAX e Claro tv+?", o: ["A ‚Äì Gravar t√≠tulos do NOW", "B ‚Äì Replay de toda a programa√ß√£o", "C ‚Äì Replay de gols no Premiere", "D ‚Äì Recome√ßar evento atual ou retroativos at√© 7 dias"], c: 3, t: 40, e: "Possibilidade de retroceder na grade linear. [cite: 204]"},
            {q: "Sobre a fun√ß√£o AUTODESLIGAR nos HDNGs, qual o procedimento adequado?", o: ["A ‚Äì Desabilitar para evitar visitas inesperadas", "B ‚Äì N√£o desabilitar para manter o decodificador atualizado", "C ‚Äì J√° vem desabilitada de f√°brica", "D ‚Äì J√° vem habilitada de f√°brica"], c: 1, t: 35, e: "Standby √© necess√°rio para atualiza√ß√µes autom√°ticas. [cite: 208]"},
            {q: "Qual alternativa abaixo representa a melhor qualidade de sinal?", o: ["A ‚Äì PS 100%, QS 100% e BER -5.", "B ‚Äì PS 60%, QS 100% e BER -8.", "C ‚Äì PS 90% , QS 70% e BER -7.", "D ‚Äì PS 95%, QS 70% e BER -6."], c: 1, t: 35, e: "BER -8 indica sinal muito superior a -5. [cite: 213]"},
            {q: "Quais recursos teremos em um decoder com Update ID 1?", o: ["A ‚Äì Alta defini√ß√£o, Servi√ßo de Grava√ß√£o e NOW (VOD).", "B ‚Äì Alta defini√ß√£o e Now (VOD).", "C ‚Äì Alta defini√ß√£o e servi√ßo de grava√ß√£o.", "D ‚Äì Somente alta defini√ß√£o."], c: 1, t: 30, e: "Update ID 1 libera conte√∫dos HD e VOD. [cite: 218]"},
            {q: "Para evitar lentid√£o por congestionamento Wi-Fi, o que fazer?", o: ["A ‚Äì Canal 11 (menos congestionado)", "B ‚Äì Garantir n√≠veis entre -40 √† -70 dBm", "C ‚Äì C√¥modo central da resid√™ncia", "D ‚Äì Canal Autom√°tico e orientar boot no Emta"], c: 3, t: 40, e: "Boot for√ßa busca por canal menos congestionado. [cite: 226]"},
            {q: "O que √© BER?", o: ["A ‚Äì Taxa de erro de transmiss√£o.", "B ‚Äì Taxa de erro de recep√ß√£o.", "C ‚Äì Taxa de erro de modula√ß√£o.", "D ‚Äì Taxa de erro de bit."], c: 3, t: 20, e: "Bit Error Rate: integridade da recep√ß√£o. [cite: 231]"}
        ];

        let cur = 0, score = 0, correctCount = 0, timer, timeLeft, pName = "";

        // AS QUEST√ïES SEGUIR√ÉO A ORDEM DO DOCUMENTO, SEM EMBARALHAR
        document.getElementById('btn-iniciar').onclick = () => {
            pName = document.getElementById('p-name').value.trim();
            if(!pName) return alert("INSIRA SEU NOME PARA CERTIFICA√á√ÉO");
            document.getElementById('setup').classList.add('hidden');
            document.getElementById('quiz').classList.remove('hidden');
            loadQ();
        };

        function loadQ() {
            if(cur >= QUESTIONS.length) return finish();
            const q = QUESTIONS[cur];
            timeLeft = q.t;
            document.getElementById('q-info').innerText = `DESAFIO ${cur+1}/${QUESTIONS.length}`;
            document.getElementById('q-text').innerText = q.q;
            document.getElementById('explanation').classList.add('hidden');
            document.getElementById('p-fill').style.width = ((cur / QUESTIONS.length) * 100) + "%";
            
            const box = document.getElementById('opts');
            box.innerHTML = "";
            
            // AS OP√á√ïES APARECER√ÉO NA ORDEM FIXA (A, B, C, D)
            q.o.forEach((optText, index) => {
                const b = document.createElement('button');
                b.className = "btn";
                b.innerText = optText;
                b.onclick = () => select(index === q.c, b);
                box.appendChild(b);
            });
            runTimer();
        }

        function runTimer() {
            const f = document.getElementById('t-fill');
            f.style.width = "100%";
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                f.style.width = (timeLeft/QUESTIONS[cur].t*100) + "%";
                if(timeLeft <= 0) select(false, null);
            }, 1000);
        }

        function select(isCorrect, b) {
            clearInterval(timer);
            const correctIdx = QUESTIONS[cur].c;
            const btns = document.querySelectorAll('.btn');
            btns.forEach(el => el.style.pointerEvents = "none");

            if(isCorrect) {
                if(b) b.classList.add('correct');
                document.getElementById('snd-correct').play();
                correctCount++;
                score += (100 + (timeLeft * 10));
                confetti({ particleCount: 30, spread: 60, origin: { y: 0.8 } });
            } else {
                if(b) b.classList.add('wrong');
                document.getElementById('snd-wrong').play();
                btns[correctIdx].classList.add('correct');
            }
            document.getElementById('explanation').innerText = `üí° EXPLICA√á√ÉO: ${QUESTIONS[cur].e}`;
            document.getElementById('explanation').classList.remove('hidden');
            cur++;
            setTimeout(loadQ, 4000);
        }

        async function finish() {
            const total = QUESTIONS.length;
            const percent = (correctCount / total) * 100;
            const statusDisplay = document.getElementById('status-display');
            
            document.getElementById('quiz').classList.add('hidden');
            document.getElementById('result').classList.remove('hidden');

            if(percent >= 70) {
                statusDisplay.innerText = "APROVADO ‚úÖ";
                statusDisplay.className = "status-box aprovado";
                confetti({ particleCount: 150, spread: 80 });
            } else {
                statusDisplay.innerText = "REPROVADO ‚ùå";
                statusDisplay.className = "status-box reprovado";
            }

            document.getElementById('performance-summary').innerText = 
                `Acertos: ${correctCount} de ${total} (${percent.toFixed(0)}%) | Pontos: ${score}`;
            
            await setDoc(doc(db, "ranking", pName + "_" + Date.now()), { name: pName, score: score });
        }

        const qRank = query(collection(db, "ranking"), orderBy("score", "desc"), limit(5));
        onSnapshot(qRank, (snap) => {
            const list = document.getElementById('ranking-list');
            list.innerHTML = "";
            let i = 1;
            let foundMe = false;
            snap.forEach((doc) => {
                const d = doc.data();
                if(d.name === pName && d.score === score) foundMe = true;
                list.innerHTML += `<li><span>${i}. ${d.name}</span> <b>${d.score}</b></li>`;
                i++;
            });
            if (pName && !document.getElementById('result').classList.contains('hidden') && !foundMe) {
                document.getElementById('incentive-msg').classList.remove('hidden');
            }
        });
    </script>
</body>
</html>
